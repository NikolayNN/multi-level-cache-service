# Multi-Level State Store (Cache Service)

В этом репозитории находится экспериментальное многоуровневое хранилище
состояний. Основной уровень использует RocksDB и предназначен для быстрого
доступа к данным, которые неудобно или неэффективно хранить в реляционных
СУБД. Дополнительные уровни (например, Ristretto или Redis) служат только для
ускорения чтения и записи.
Их использование опционально и настраивается через конфигурацию сервиса.

* `app/` — REST‑сервис, предоставляющий API к каскаду уровней хранения. См.
  подробности в [`app/README.md`](app/README.md).
* `cli/` — консольный клиент для работы с сервисом. Подробнее см.
  [`cli/README.md`](cli/README.md).
* `Dockerfile` — контейнер со всеми зависимостями и предустановленным CLI.


Для сборки и запуска сервисов требуется Go 1.24+. Инструкции по
установке зависимостей, сборке и запуску тестов смотрите в
соответствующих README внутри каталогов `app` и `cli`.


## Сборка Docker-образа

Версия образа хранится в файле `VERSION`. Для удобства предусмотрены два
скрипта: `build_dev.sh` и `build_release.sh`. Они автоматически добавляют в тег
метку окружения `DEV` или `RELEASE`.

```bash
# сборка образа для разработки
./build_dev.sh

# или сборка релизного образа
./build_release.sh
```

Получившийся образ содержит REST‑сервис и CLI. Запуск сервиса:

```bash
# пример запуска собранного DEV-образа
docker run -p 8080:8080 cooll3r/multi-level-cache:$(cat VERSION)-DEV
```

### Сборка новой версии

1. Измените номер версии в файле `VERSION`.
2. Запустите `build_dev.sh` или `build_release.sh` в зависимости от нужной метки.

Для сборки и запуска сервисов требуется Go 1.24+. Инструкции по установке
зависимостей, сборке и запуску тестов приводятся в README файлов каталогов
`app` и `cli`.
